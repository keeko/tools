$out = [];

// build model
$out['{{ models }}'] = [];
foreach ($data as ${{ model }}) {
	$out['{{ models }}'][] = $this->{{ model }}ToArray(${{ model }});
}

// meta
$out['meta'] = [
	'total' => $data->getNbResults(),
	'first' => $data->getFirstPage(),
	'next' => $data->getNextPage(),
	'previous' => $data->getPreviousPage(),
	'last' => $data->getLastPage()
];

// return response
return new JsonResponse($out);